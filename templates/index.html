{% extends "base.html" %}

{% block scripts %}
  {{block.super}}
  <script type="text/javascript">
    var currentSlideNumber = 0;
    var totalNumberOfSlides = {{slides|length}};
    function goToSlide(slideNumber) {
      $(".slide-bullet").removeClass("slide-bullet-active");
      $("#slide-bullet-" + slideNumber).addClass("slide-bullet-active");
      $(".slide-image").removeClass("slide-image-active");
      $("#slide-image-" + slideNumber).addClass("slide-image-active");
    }
    function advanceSlide() {
      currentSlideNumber = (currentSlideNumber + 1) % totalNumberOfSlides;
      goToSlide(currentSlideNumber);
    }
    {# TODO: move delay time to gaesettings #}
    window.setInterval(advanceSlide, {{HomepageSlideRotationDelay}});
  </script>
{% endblock %}

{% block css %}
  {{block.super}}
  <link type="text/css" rel="stylesheet" href="/stylesheets/picture_slideshow.css" />
  <link type="text/css" rel="stylesheet" href="/stylesheets/index.css" />
{% endblock %}

{% block content %}
  <div class="ccf-info">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent viverra iaculis nunc, quis scelerisque nibh scelerisque nec. Nam tempor feugiat accumsan. Vestibulum gravida porttitor erat, at auctor sem semper a. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Curabitur congue, erat et posuere auctor, tortor ipsum.</div>
  <div class="homepage-slideshow">
    {% for slide in slides %}
      <a href="{{slide.CompleteURL}}" id="slide-image-{{forloop.counter0}}" class="slide-image{% if forloop.first %} slide-image-active{% endif %}">
        <img width="600px" height="450px" src="/image?id={{slide.id}}"/>
      </a>
    {% empty %}
      <p>No Slides</p>
    {% endfor %}
    <div class="homepage-slideshow-nav">
      {% for slide in slides %}
        <span id="slide-bullet-{{forloop.counter0}}" class="slide-bullet {% if forloop.first %}slide-bullet-active{% endif %}" onclick="goToSlide({{forloop.counter0}});">&bull;</span>
      {% endfor %}
    </div>
  </div>
  <div class="agenda">
    <iframe src="https://www.google.com/calendar/b/0/embed?title=Upcoming%20CCF%20Events&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=300&amp;wkst=1&amp;bgcolor=%23ffffff&amp;ctz=America%2FChicago" style=" border-width:0 " width="300" height="300" frameborder="0" scrolling="no"></iframe>
  </div>
  <div class="homepage-shortcuts">
    <span>Gel Groups</span><br />
    <span>Donate</span>
  </div>
{% endblock %}
